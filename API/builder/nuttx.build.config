{
  "stm32f4dis": {
    "init": [
      { "cwd": "%{nuttx-tools}", "cmd": "sh configure.sh", "args": "stm32f4discovery/usbnsh" },
      { "cwd": "%{nuttx-tools}", "cmd": "make", "args": "clean" },
      { "cwd": "%{nuttx-tools}", "cmd": "make", "args": "context" }
    ],
    "build": {
      "cwd": "%{nuttx-tools}",
      "cmd": "make",
      "args": "-j1",
      "env": {
        "EXTRA_LIBS": "-Map=nuttx.map",
      },
      "conditional-options": [
        {
          "condition": "'%{build-type}' == debug",
          "env": { "R": 1 }
        }
      ]
    },
    "artifacts": {
      "%{nuttx}/nuttx.bin",
      "%{nuttx}/arch/arm/src/nuttx.map"
    }
  }
}
